"use strict";

$(document).ready(function() {
    mapboxgl.accessToken = mapboxToken;

    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v11',
        center: [-98.4936, 29.4241],
        zoom: 10
    });

    var marker = new mapboxgl.Marker({
        color: '#133467',
        draggable: true
    }).setLngLat([-98.4936, 29.4241]).addTo(map).on('dragend', getLocation);

    map.addControl(new MapboxGeocoder({
        accessToken: mapboxgl.accessToken,
        mapboxgl: mapboxgl,
        marker: false
    }).on('result', function(data) {
        marker.setLngLat(data.result.center);

        getLocation();
    }));

    function getLocation() {
        $.ajax('https://api.mapbox.com/geocoding/v5/mapbox.places/' + marker.getLngLat().lng + ',' + marker.getLngLat().lat + '.json?language=en&access_token=' + mapboxToken).done(function(data) {
            console.log(data);

            var place = '', region = '', country = '';

            $.each(data.features, function(i, obj) {
                if(obj.id.includes('place') || obj.id.includes('locality')) {
                    place = obj.text;
                } else if(obj.id.includes('region')) {
                    region = obj.text;
                } else if(obj.id.includes('country')) {
                    country = obj.text;
                }
            });

            getWeather(place, region, country);
        });
    }

    function getWeather(place, region, country) {
        $.ajax('https://cors-anywhere.herokuapp.com/https://api.darksky.net/forecast/' + darkSkyToken + '/' + marker.getLngLat().lat + ',' + marker.getLngLat().lng).done(function(data) {
            console.log(data);

            // Location
            if(place === '') {
                $('.location').html(region + ', ' + country);
            } else if(region === '') {
                $('.location').html(place + ', ' + country);
            } else {
                $('.location').html(place + ', ' + region + ', ' + country);
            }

            /********** Today's weather **********/
            var today = data.daily.data[0];

            // Get/display today's weather icon

            // Get/display today's weather icon
            $('.today .icon').html(getWeatherIcon(today.icon));

            // Get/display current temperature (fahrenheit/celcius)
            function getCurrentTemperature() {
                if($('.fahrenheit').hasClass('active')) {
                    $('.temp').html(Math.round(data.currently.temperature));
                } else {
                    $('.temp').html((Math.round((data.currently.temperature - 32) * .5556)));
                }
            }

            getCurrentTemperature();

            $('.currently > sup').children('span').click(function() {
                if(!$(this).hasClass('active')) {
                    $(this).addClass('active');
                    $(this).siblings('span').removeClass('active');
                }

                getCurrentTemperature();
            });

            // Get/display today's weather summary
            $('.today .summary').html(today.summary);

            // Get/display today's high/low temperature
            $('.today .high-low .high').html(Math.round(today.temperatureMax) + '<sup>&deg;F</sup><sub>H</sub>');
            $('.today .high-low .low').html(Math.round(today.temperatureMin) + '<sup>&deg;F</sup><sub>L</sub>');

            // Get/display today's precipitation
            $('.today .precipitation').html('Precipitation: ' + Math.round(today.precipProbability * 100) + '%');

            // Get/display today's humidity
            $('.today .humidity').html('Humidity: ' + Math.round(today.humidity * 100) + '%');

            // Get/display today's wind
            $('.today .wind').html('Wind: ' + Math.round(today.windSpeed) + 'mph');

            /********** Tomorrows's weather **********/
            var tomorrow = data.daily.data[1];

            // Get/display tomorrow's date
            var tomorrows_date = new Date(tomorrow.time * 1000);
            $('.tomorrow > .date').html(days[tomorrows_date.getDay()] + ', ' + months[tomorrows_date.getMonth()] + ' ' + tomorrows_date.getDate());

            // Get/display tomorrow's weather icon
            $('.tomorrow > .icon').html(getWeatherIcon(tomorrow.icon));

            // Get/display tomorrow's high/low temperature
            $('.tomorrow .high-low .high').html(Math.round(tomorrow.temperatureMax) + '<sup>&deg;F</sup><sub>H</sub>');
            $('.tomorrow .high-low .low').html(Math.round(tomorrow.temperatureMin) + '<sup>&deg;F</sup><sub>L</sub>');

            // Get/display tomorrow's precipitation
            $('.tomorrow .precipitation').html('Precipitation: ' + Math.round(tomorrow.precipProbability * 100) + '%');

            // Get/display tomorrow's humidity
            $('.tomorrow .humidity').html('Humidity: ' + Math.round(tomorrow.humidity * 100) + '%');

            // Get/display tomorrow's wind
            $('.tomorrow .wind').html('Wind: ' + Math.round(tomorrow.windSpeed) + 'mph');

            // Get/display tomorrow's weather summary
            $('.tomorrow .summary').html(tomorrow.summary);

            /********** Day after tomorrow's weather **********/
            var day_after = data.daily.data[2];

            // Get/display day after tomorrow's date
            var day_after_date = new Date(day_after.time * 1000);
            $('.day-after > .date').html(days[day_after_date.getDay()] + ', ' + months[day_after_date.getMonth()] + ' ' + day_after_date.getDate());

            // Get/display day after tomorrow's weather icon
            $('.day-after > .icon').html(getWeatherIcon(day_after.icon));

            // Get/display day after tomorrow's high/low temperature
            $('.day-after .high-low .high').html(Math.round(day_after.temperatureMax) + '<sup>&deg;F</sup><sub>H</sub>');
            $('.day-after .high-low .low').html(Math.round(day_after.temperatureMin) + '<sup>&deg;F</sup><sub>L</sub>');

            // Get/display day after tomorrow's precipitation
            $('.day-after .precipitation').html('Precipitation: ' + Math.round(day_after.precipProbability * 100) + '%');

            // Get/display day after tomorrow's humidity
            $('.day-after .humidity').html('Humidity: ' + Math.round(day_after.humidity * 100) + '%');

            // Get/display day after tomorrow's wind
            $('.day-after .wind').html('Wind: ' + Math.round(day_after.windSpeed) + 'mph');

            // Get/display day after tomorrow's weather summary
            $('.day-after .summary').html(day_after.summary);
        });
    }

    var iconWidth = 48, iconHeight = 48;
    var weatherIcons = [
        {
            condition: 'clear-day',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="' + iconWidth + '" height="' + iconHeight + '" viewBox="0 0 24 24"><path d="M4.069 13h-4.069v-2h4.069c-.041.328-.069.661-.069 1s.028.672.069 1zm3.034-7.312l-2.881-2.881-1.414 1.414 2.881 2.881c.411-.529.885-1.003 1.414-1.414zm11.209 1.414l2.881-2.881-1.414-1.414-2.881 2.881c.528.411 1.002.886 1.414 1.414zm-6.312-3.102c.339 0 .672.028 1 .069v-4.069h-2v4.069c.328-.041.661-.069 1-.069zm0 16c-.339 0-.672-.028-1-.069v4.069h2v-4.069c-.328.041-.661.069-1 .069zm7.931-9c.041.328.069.661.069 1s-.028.672-.069 1h4.069v-2h-4.069zm-3.033 7.312l2.88 2.88 1.415-1.414-2.88-2.88c-.412.528-.886 1.002-1.415 1.414zm-11.21-1.415l-2.88 2.88 1.414 1.414 2.88-2.88c-.528-.411-1.003-.885-1.414-1.414zm2.312-4.897c0 2.206 1.794 4 4 4s4-1.794 4-4-1.794-4-4-4-4 1.794-4 4zm10 0c0 3.314-2.686 6-6 6s-6-2.686-6-6 2.686-6 6-6 6 2.686 6 6z"/></svg>'
        }, {
            condition: 'clear-night',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="' + iconWidth + '" height="' + iconHeight + '" viewBox="0 0 24 24"><path d="M10.719 2.082c-2.572 2.028-4.719 5.212-4.719 9.918 0 4.569 1.938 7.798 4.548 9.895-4.829-.705-8.548-4.874-8.548-9.895 0-5.08 3.808-9.288 8.719-9.918zm1.281-2.082c-6.617 0-12 5.383-12 12s5.383 12 12 12c1.894 0 3.87-.333 5.37-1.179-3.453-.613-9.37-3.367-9.37-10.821 0-7.555 6.422-10.317 9.37-10.821-1.74-.682-3.476-1.179-5.37-1.179zm0 10.999c1.437.438 2.562 1.564 2.999 3.001.44-1.437 1.565-2.562 3.001-3-1.436-.439-2.561-1.563-3.001-3-.437 1.436-1.562 2.561-2.999 2.999zm8.001.001c.958.293 1.707 1.042 2 2.001.291-.959 1.042-1.709 1.999-2.001-.957-.292-1.707-1.042-2-2-.293.958-1.042 1.708-1.999 2zm-1-9c-.437 1.437-1.563 2.562-2.998 3.001 1.438.44 2.561 1.564 3.001 3.002.437-1.438 1.563-2.563 2.996-3.002-1.433-.437-2.559-1.564-2.999-3.001z"/></svg>'
        }, {
            condition: 'rain',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="' + iconWidth + '" height="' + iconHeight + '" viewBox="0 0 24 24"><path d="M20.422 8.516c-.178-3.233-3.031-5.778-6.432-5.492-1.087-1.239-2.693-2.024-4.49-2.024-3.172 0-5.754 2.443-5.922 5.516-2.033.359-3.578 2.105-3.578 4.206 0 2.362 1.949 4.278 4.354 4.278h1.326c.771 1.198 2.124 2 3.674 2h10.291c2.406 0 4.355-1.916 4.355-4.278 0-2.101-1.545-3.847-3.578-4.206zm-15.395 4.484h-.673c-1.297 0-2.354-1.022-2.354-2.278 0-2.118 2.104-2.597 3.488-2.512-.05-1.356.137-5.21 4.012-5.21.967 0 1.714.25 2.29.644-1.823.922-3.096 2.746-3.212 4.872-2.022.358-3.697 2.127-3.551 4.484zm14.618 2h-10.291c-1.297 0-2.354-1.022-2.354-2.278 0-2.118 2.104-2.597 3.488-2.512-.05-1.356.137-5.21 4.012-5.21 3.771 0 4.229 3.771 4.012 5.209 1.509-.105 3.488.437 3.488 2.513 0 1.256-1.057 2.278-2.355 2.278zm-14.063 8l-1.41-1.41 3.59-3.59 1.41 1.41-3.59 3.59zm8.543-3.59l-1.41-1.41-3.59 3.59 1.41 1.41 3.59-3.59zm4.875 0l-1.41-1.41-3.59 3.59 1.41 1.41 3.59-3.59z"/></svg>'
        }, {
            condition: 'snow',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="' + iconWidth + '" height="' + iconHeight + '" viewBox="0 0 24 24"><path d="M20.422 8.516c-.178-3.232-3.031-5.777-6.432-5.491-1.087-1.24-2.693-2.025-4.49-2.025-3.172 0-5.754 2.443-5.922 5.516-2.033.359-3.578 2.105-3.578 4.206 0 2.362 1.949 4.278 4.354 4.278h1.326c.771 1.198 2.124 2 3.674 2h10.291c2.406 0 4.355-1.916 4.355-4.278 0-2.101-1.545-3.847-3.578-4.206zm-15.395 4.484h-.673c-1.297 0-2.354-1.021-2.354-2.278 0-2.118 2.104-2.597 3.488-2.513-.05-1.355.137-5.209 4.012-5.209.967 0 1.714.25 2.29.645-1.823.921-3.096 2.745-3.212 4.871-2.022.357-3.697 2.127-3.551 4.484zm14.618 2h-10.291c-1.297 0-2.354-1.021-2.354-2.278 0-2.118 2.104-2.597 3.488-2.513-.05-1.355.137-5.209 4.012-5.209 3.771 0 4.229 3.771 4.012 5.209 1.509-.105 3.488.437 3.488 2.513 0 1.257-1.057 2.278-2.355 2.278zm2.105 4.25c0 .689-.559 1.25-1.25 1.25s-1.25-.561-1.25-1.25.559-1.25 1.25-1.25 1.25.561 1.25 1.25zm-4 0c0 .689-.559 1.25-1.25 1.25s-1.25-.561-1.25-1.25.559-1.25 1.25-1.25 1.25.561 1.25 1.25zm-4 0c0 .689-.559 1.25-1.25 1.25s-1.25-.561-1.25-1.25.559-1.25 1.25-1.25 1.25.561 1.25 1.25zm-4 0c0 .689-.559 1.25-1.25 1.25s-1.25-.561-1.25-1.25.559-1.25 1.25-1.25 1.25.561 1.25 1.25zm2 2.5c0 .689-.559 1.25-1.25 1.25s-1.25-.561-1.25-1.25.559-1.25 1.25-1.25 1.25.561 1.25 1.25zm4.094 0c0 .689-.559 1.25-1.25 1.25s-1.25-.561-1.25-1.25.559-1.25 1.25-1.25 1.25.561 1.25 1.25zm3.906 0c0 .689-.559 1.25-1.25 1.25s-1.25-.561-1.25-1.25.559-1.25 1.25-1.25 1.25.561 1.25 1.25z"/></svg>'
        }, {
            condition: 'sleet',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="' + iconWidth + '" height="' + iconHeight + '" viewBox="0 0 24 24"><path d="M20.422 8.516c-.178-3.233-3.031-5.778-6.432-5.492-1.087-1.239-2.693-2.024-4.49-2.024-3.172 0-5.754 2.443-5.922 5.516-2.033.359-3.578 2.105-3.578 4.206 0 2.362 1.949 4.278 4.354 4.278h1.326c.771 1.198 2.124 2 3.674 2h10.291c2.406 0 4.355-1.916 4.355-4.278 0-2.101-1.545-3.847-3.578-4.206zm-15.395 4.484h-.673c-1.297 0-2.354-1.022-2.354-2.278 0-2.118 2.104-2.597 3.488-2.512-.05-1.356.137-5.21 4.012-5.21.967 0 1.714.25 2.29.644-1.823.922-3.096 2.746-3.212 4.872-2.022.358-3.697 2.127-3.551 4.484zm14.618 2h-10.291c-1.297 0-2.354-1.022-2.354-2.278 0-2.118 2.104-2.597 3.488-2.512-.05-1.356.137-5.21 4.012-5.21 3.771 0 4.229 3.771 4.012 5.209 1.509-.105 3.488.437 3.488 2.513 0 1.256-1.057 2.278-2.355 2.278zm-10.52 4.41l-1.41-1.41-3.59 3.59 1.41 1.41 3.59-3.59zm9.875 0l-1.41-1.41-3.59 3.59 1.41 1.41 3.59-3.59zm-5-.16c0 .69-.559 1.25-1.25 1.25s-1.25-.56-1.25-1.25.559-1.25 1.25-1.25 1.25.56 1.25 1.25zm-3.75 1.25c-.691 0-1.25.56-1.25 1.25s.559 1.25 1.25 1.25 1.25-.56 1.25-1.25-.559-1.25-1.25-1.25z"/></svg>'
        }, {
            condition: 'wind',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="' + iconWidth + '" height="' + iconHeight + '" viewBox="0 0 24 24"><path d="M18 20c0-1.656-1.344-3-3-3h-15v2h15c.552 0 1 .448 1 1s-.448 1-1 1c-.403 0-.747-.242-.905-.587l-1.749.956c.499.965 1.494 1.631 2.654 1.631 1.656 0 3-1.344 3-3zm1.014-7.655c.082-.753.712-1.345 1.486-1.345.827 0 1.5.673 1.5 1.5s-.673 1.5-1.5 1.5h-20.5v2h20.5c1.932 0 3.5-1.568 3.5-3.5s-1.568-3.5-3.5-3.5c-1.624 0-2.977 1.116-3.372 2.617l1.886.728zm-11.014-9.345c3.213 0 3.367 3.293 3.185 4.281.977-.036 2.815.22 2.815 2.052 0 1.004-.869 1.667-1.854 1.667h-8.312c-.985 0-1.834-.663-1.834-1.667 0-1.818 1.779-2.116 2.815-2.052-.08-.901-.134-4.281 3.185-4.281zm0-2c-2.671 0-4.845 2.093-4.986 4.729-1.713.307-3.014 1.803-3.014 3.604 0 2.024 1.642 3.667 3.667 3.667h8.666c2.025 0 3.667-1.643 3.667-3.667 0-1.801-1.301-3.297-3.014-3.604-.141-2.636-2.315-4.729-4.986-4.729z"/></svg>'
        }, {
            condition: 'fog',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="' + iconWidth + '" height="' + iconHeight + '" viewBox="0 0 24 24"><path d="M20.422 8.516c-.178-3.232-3.031-5.777-6.432-5.491-1.087-1.24-2.693-2.025-4.49-2.025-3.172 0-5.754 2.443-5.922 5.516-2.033.359-3.578 2.105-3.578 4.206 0 2.362 1.949 4.278 4.354 4.278h1.326c.771 1.198 2.124 2 3.674 2h10.291c2.406 0 4.355-1.916 4.355-4.278 0-2.101-1.545-3.847-3.578-4.206zm-15.395 4.484h-.673c-1.297 0-2.354-1.021-2.354-2.278 0-2.118 2.104-2.597 3.488-2.513-.05-1.355.137-5.209 4.012-5.209.967 0 1.714.25 2.29.645-1.823.921-3.096 2.745-3.212 4.871-2.022.357-3.697 2.127-3.551 4.484zm14.618 2h-10.291c-1.297 0-2.354-1.021-2.354-2.278 0-2.118 2.104-2.597 3.488-2.513-.05-1.355.137-5.209 4.012-5.209 3.771 0 4.229 3.771 4.012 5.209 1.509-.105 3.488.437 3.488 2.513 0 1.257-1.057 2.278-2.355 2.278zm4.355 5h-19v-2h19v2zm0 3h-19v-2h19v2z"/></svg>'
        }, {
            condition: 'cloudy',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="' + iconWidth + '" height="' + iconHeight + '" viewBox="0 0 24 24"><path d="M20.422 11.516c-.178-3.233-3.031-5.778-6.432-5.492-1.087-1.239-2.693-2.024-4.49-2.024-3.172 0-5.754 2.443-5.922 5.516-2.033.359-3.578 2.105-3.578 4.206 0 2.362 1.949 4.278 4.354 4.278h1.326c.771 1.198 2.124 2 3.674 2h10.291c2.406 0 4.355-1.916 4.355-4.278 0-2.101-1.545-3.847-3.578-4.206zm-15.395 4.484h-.673c-1.297 0-2.354-1.022-2.354-2.278 0-2.118 2.104-2.597 3.488-2.512-.05-1.356.137-5.21 4.012-5.21.967 0 1.714.25 2.29.644-1.823.922-3.096 2.746-3.212 4.872-2.022.358-3.697 2.127-3.551 4.484zm14.618 2h-10.291c-1.297 0-2.354-1.022-2.354-2.278 0-2.118 2.104-2.597 3.488-2.512-.05-1.356.137-5.21 4.012-5.21 3.771 0 4.229 3.771 4.012 5.209 1.509-.105 3.488.437 3.488 2.513 0 1.256-1.057 2.278-2.355 2.278z"/></svg>'
        }, {
            condition: 'partly-cloudy-day',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="' + iconWidth + '" height="' + iconHeight + '" viewBox="0 0 24 24"><path d="M2.396 12h-2.396v-2h2.396v2zm7.604-6.458v-3.542h-2v3.542h2zm-4.793.876l-2.156-2.156-1.414 1.414 2.156 2.156 1.414-1.414zm9.461-2.396l-2.115 2.114 1.414 1.414 2.115-2.114-1.414-1.414zm-11.7 10.907l-2.198 1.919 1.303 1.517 2.198-1.919-1.303-1.517zm21.032 2.793c0 2.362-1.95 4.278-4.354 4.278h-10.292c-2.404 0-4.354-1.916-4.354-4.278 0-.77.211-1.49.574-2.113-.964-.907-1.574-2.18-1.574-3.609 0-2.762 2.238-5 5-5 1.329 0 2.523.528 3.414 1.376.649-.24 1.35-.376 2.086-.376 3.171 0 5.753 2.443 5.921 5.516 2.034.359 3.579 2.105 3.579 4.206zm-18-5.722c0 .86.37 1.628.955 2.172.485-.316 1.029-.551 1.624-.656.088-1.61.843-3.042 1.994-4.046-.46-.288-.991-.47-1.573-.47-1.654 0-3 1.346-3 3zm16 5.722c0-2.076-1.979-2.618-3.489-2.512.218-1.439-.24-5.21-4.011-5.21-3.875 0-4.062 3.854-4.011 5.209-1.385-.084-3.489.395-3.489 2.513 0 1.256 1.056 2.278 2.354 2.278h10.291c1.299 0 2.355-1.022 2.355-2.278z"/></svg>'
        }, {
            condition: 'partly-cloudy-night',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="' + iconWidth + '" height="' + iconHeight + '" viewBox="0 0 24 24"><path d="M20.422 11.516c-.169-3.073-2.75-5.516-5.922-5.516-1.229 0-2.368.37-3.313.999-1.041-1.79-2.974-2.999-5.19-2.999-.468 0-.947.054-1.434.167 1.347 3.833-.383 6.416-4.563 5.812-.006 3.027 2.197 5.468 5.02 5.935.104 2.271 1.996 4.086 4.334 4.086h10.291c2.406 0 4.355-1.916 4.355-4.278 0-2.101-1.545-3.847-3.578-4.206zm-15.016 2.439c-1.285-.192-2.384-.997-2.964-2.125 2.916-.119 5.063-2.846 4.451-5.729 1.259.29 2.282 1.18 2.778 2.346-.635.875-1.031 1.928-1.094 3.069-1.419.251-2.588 1.186-3.171 2.439zm14.24 4.045h-10.292c-1.297 0-2.354-1.022-2.354-2.278 0-2.118 2.104-2.597 3.488-2.512-.05-1.356.137-5.21 4.012-5.21 3.771 0 4.229 3.771 4.012 5.209 1.509-.105 3.488.437 3.488 2.513 0 1.256-1.057 2.278-2.354 2.278z"/></svg>'
        }, {
            condition: 'hail',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="' + iconWidth + '" height="' + iconHeight + '" viewBox="0 0 24 24"><path d="M20.422 7.516c-.178-3.233-3.031-5.778-6.432-5.492-1.087-1.239-2.693-2.024-4.49-2.024-3.172 0-5.754 2.443-5.922 5.516-2.033.359-3.578 2.105-3.578 4.206 0 2.362 1.949 4.278 4.354 4.278h1.326c.771 1.198 2.124 2 3.674 2h10.291c2.406 0 4.355-1.916 4.355-4.278 0-2.101-1.545-3.847-3.578-4.206zm-15.395 4.484h-.673c-1.297 0-2.354-1.022-2.354-2.278 0-2.118 2.104-2.597 3.488-2.512-.05-1.356.137-5.21 4.012-5.21.967 0 1.714.25 2.29.644-1.823.922-3.096 2.746-3.212 4.872-2.022.358-3.697 2.127-3.551 4.484zm14.618 2h-10.291c-1.297 0-2.354-1.022-2.354-2.278 0-2.118 2.104-2.597 3.488-2.512-.05-1.356.137-5.21 4.012-5.21 3.771 0 4.229 3.771 4.012 5.209 1.509-.105 3.488.437 3.488 2.513 0 1.256-1.057 2.278-2.355 2.278zm-4.645 8.5c0 .828-.67 1.5-1.5 1.5s-1.5-.672-1.5-1.5.67-1.5 1.5-1.5 1.5.672 1.5 1.5zm1.199-1.287l2.801-4.197-.016-.016-4.176 2.813c.608.298 1.098.79 1.391 1.4zm-6.199 1.287c0 .828-.67 1.5-1.5 1.5s-1.5-.672-1.5-1.5.67-1.5 1.5-1.5 1.5.672 1.5 1.5zm1.199-1.287l2.801-4.197-.016-.016-4.176 2.813c.608.298 1.098.79 1.391 1.4zm-6.199 1.287c0 .828-.67 1.5-1.5 1.5s-1.5-.672-1.5-1.5.67-1.5 1.5-1.5 1.5.672 1.5 1.5zm1.199-1.287l2.801-4.197-.016-.016-4.176 2.813c.608.298 1.098.79 1.391 1.4z"/></svg>'
        }, {
            condition: 'thunderstorm',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="' + iconWidth + '" height="' + iconHeight + '" viewBox="0 0 24 24"><path d="M13.802 13h3.042l-1.844 4h3l-6 7 2-5h-3l2.802-6zm6.62-5.484c-.178-3.232-3.031-5.777-6.432-5.491-1.087-1.24-2.693-2.025-4.49-2.025-3.172 0-5.754 2.443-5.922 5.516-2.033.359-3.578 2.105-3.578 4.206 0 2.362 1.949 4.278 4.354 4.278h1.326c.771 1.198 2.124 2 3.674 2h1.381l.935-2h-2.316c-1.297 0-2.354-1.021-2.354-2.278 0-2.118 2.104-2.597 3.488-2.513-.05-1.355.137-5.209 4.012-5.209 3.771 0 4.229 3.771 4.012 5.209 1.509-.105 3.488.437 3.488 2.513 0 1.257-1.057 2.278-2.355 2.278h-1.598l-.922 2h2.52c2.406 0 4.355-1.916 4.355-4.278 0-2.101-1.545-3.847-3.578-4.206zm-11.844 0c-2.022.357-3.697 2.127-3.551 4.484h-.673c-1.297 0-2.354-1.021-2.354-2.278 0-2.118 2.104-2.597 3.488-2.513-.05-1.355.137-5.209 4.012-5.209.967 0 1.714.25 2.29.645-1.823.921-3.096 2.745-3.212 4.871z"/></svg>'
        }, {
            condition: 'tornado',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" width="' + iconWidth + '" height="' + iconHeight + '" viewBox="0 0 24 24"><path d="M21.688 6.668c.172 3.71-3.595 6.901-6.56 9.735-2.175 2.079-3.849 4.743-4.03 7.597-2.059-1.342-2.509-3.797-2.123-5.938.53-2.95-2.231-4.9-3.293-5.822-2.15-1.867-3.682-4.216-3.682-6.647 0-4.607 5.533-5.593 10.108-5.593 3.397 0 9.892.913 9.892 3.798 0 1.979-5.022 3.202-9.56 3.202-8.735 0-7.32-3.886-1.765-3.886.9 0 1.821.097 2.622.323-2.927.057-6.493 1.563-1.189 1.563 1.136 0 7.163-.385 7.163-1.5s-5.303-1.578-7.163-1.578c-3.281 0-8.108.609-8.108 3.671 0 1.636 1.063 3.46 2.994 5.137l.311.262c1.29 1.076 4.307 3.591 3.646 7.389.72-1.172 1.851-2.511 2.946-3.568-.542 0-1.602-.302-2.229-.75 1.071.089 3.084-.188 4.604-1.562-1.312 0-2.787-.219-3.74-1.062 2.44.155 5.303-.312 6.282-1.854-1.625.333-4.834.104-6.702-.875 3.045.045 7.022-.462 9.578-2.079l-.001.028.003-.001-.004.01zm-7.688 15.332c-.553 0-1 .448-1 1s.447 1 1 1 1-.448 1-1-.447-1-1-1zm-7 0c-.553 0-1 .448-1 1s.447 1 1 1 1-.448 1-1-.447-1-1-1zm-3-1c-.553 0-1 .448-1 1s.447 1 1 1 1-.448 1-1-.447-1-1-1zm2-2c-.553 0-1 .448-1 1s.447 1 1 1 1-.448 1-1-.447-1-1-1zm10 0c-.553 0-1 .448-1 1s.447 1 1 1 1-.448 1-1-.447-1-1-1zm2 2c-.553 0-1 .448-1 1s.447 1 1 1 1-.448 1-1-.447-1-1-1z"/></svg>'
        }
    ];

    function getWeatherIcon(icon) {
        var weather_icon = "";

        $.each(weatherIcons, function(i, icon_i) {
            if(icon === icon_i.condition) {
                weather_icon = icon_i.icon;
            }
        });

        return weather_icon;
    }

    var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'June', 'July', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
    var days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thur', 'Fri', 'Sat'];

    getLocation();
});